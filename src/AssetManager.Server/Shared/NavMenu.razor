<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href=""><img src="images/wgulogo.png" alt="wgu logo" height="50px"/></a>
        <button title="Navigation menu" class="navbar-toggler" @onclick="ToggleNavMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</div>

<div class="@NavMenuCssClass" @onclick="ToggleNavMenu">
    <ul class="nav flex-column">
        <li class="nav-item px-3">
            <AuthorizeView>
                <NavLink class="nav-link px-3" @onclick="() => _collapseViewsMenu = !_collapseViewsMenu">
                    <span class="oi oi-list" aria-hidden="true"></span> Production Examples
                </NavLink>
                @if (!_collapseViewsMenu)
                {
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="Student">
                            <span class="oi oi-list-rich" aria-hidden="true"></span> Student View
                        </NavLink>
                    </div>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="Manage/Asset">
                            <span class="oi oi-list-rich" aria-hidden="true"></span> Asset View
                        </NavLink>
                    </div>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="Manage/Course">
                            <span class="oi oi-list-rich" aria-hidden="true"></span> Course View
                        </NavLink>
                    </div>
                }
            </AuthorizeView>    
        </li>
        <li class="nav-item px-3">
            <AuthorizeView>
                <NavLink class="nav-link px-3" @onclick="() => _collapseReportMenu = !_collapseReportMenu">
                    <span class="oi oi-list" aria-hidden="true"></span> Reporting
                </NavLink>
                @if (!_collapseReportMenu)
                {
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="Report/Course">
                            <span class="oi oi-list-rich" aria-hidden="true"></span> Assets By Courses
                        </NavLink>
                    </div>
                }
            </AuthorizeView>    
        </li>
        <li class="nav-item px-3">
            <AuthorizeView>
                <NavLink class="nav-link px-3" @onclick="() => _collapseAdminMenu = !_collapseAdminMenu">
                    <span class="oi oi-list" aria-hidden="true"></span> Administration
                </NavLink>
                @if (!_collapseAdminMenu)
                {
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="Status">
                            <span class="oi oi-list-rich" aria-hidden="true"></span> Db Status
                        </NavLink>
                    </div>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="Admin">
                            <span class="oi oi-list-rich" aria-hidden="true"></span> Admin Tools
                        </NavLink>
                    </div>
                }
            </AuthorizeView>    
        </li>
    </ul>
    
</div>

@code {
    private bool _collapseNavMenu = true;
    private bool _collapseViewsMenu = true;
    private bool _collapseAdminMenu = true;
    private bool _collapseReportMenu = true;

    private string? NavMenuCssClass => _collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        _collapseNavMenu = !_collapseNavMenu;
    }
}